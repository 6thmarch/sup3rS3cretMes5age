<!DOCTYPE html>
<html>

<head>


    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
    <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.1/clipboard.min.js"></script>
<div class="container">
            <form id="secretform" action="/secret"  method="POST">
                <div class="input-field">
                    <textarea id="textarea1" name="msg" class="materialize-textarea" style="font-size: 2em" placeholder="Paste your shit here..."
                        required="required"></textarea>
                </div>

                <div class="button_wrapper">
                    <button class="" type="submit" name="action">Submit    
                    </button>
                </div>
            </form>
      
            <div class="divider"></div>
              <div class="input-field">
              
                    <textarea id="url" class="textarea" readonly=true></textarea>
                    </div>
                    <div class="button">
                        <button class="btn" data-clipboard-target="#url" onclick="window.alert('copied!')">
                            Copy to Clipboard
                        </button>
                    </div>
             

    </div>



    <script type="text/javascript">
        new Clipboard('.btn');
        var frm = $('#secretform');

        frm.submit(function (e) {

            e.preventDefault();

            $.ajax({
                type: frm.attr('method'),
                url: frm.attr('action'),
                data: frm.serialize(),
                success: function (data) {
                    console.log('Submission was successful.');
                    console.log(data);
                    showURL(data.token);
                },
                error: function (data) {
                    console.log('An error occurred.');
                    console.log(data);
                },
            });
        });

        function showURL(token) {
            $('#url').text(window.location.origin + "/getmsg?token=" + token)
        }
    </script>



</body>

</html>